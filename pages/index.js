import React from 'react';
import axios from 'axios';
import Layout from 'components/layout';
import SearchForm from 'components/home/SearchForm';
import RecentReviews from 'components/home/RecentReviews';
import { useSession } from 'next-auth/client';
import Link from 'next/link';

export async function getServerSideProps() {
  const props = {};
  try {
    const response = await axios.get('/reviews/recent');
    props.recentReviews = response.data;
  } catch (error) {}
  return { props };
}

const Home = ({ recentReviews = [] }) => {
  const [session, loading] = useSession();
  return (
    <>
      <Layout>
        <div className="bg-white">
          <div className="w-full max-w-6xl mx-auto px-4 lg:px-0 home-hero">
            <div className="py-16 flex flex-row items-center lg:w-7/12">
              <div className="w-full">
                <h1 className="text-4xl font-bold mb-4">Share your trading experiences</h1>
                <p className="font-semibold mb-4 text-xl text-gray-700">
                  Because your reviews matter
                </p>
                <div className="mb-6">
                  <SearchForm />
                </div>
                <p className="font-semibold mb-4 text-lg text-gray-700">
                  Browse companies by category
                </p>
                <div className="grid grid-cols-2 lg:grid-cols-5 gap-2 text-sm home-categories">
                  <a className="text-center text-white p-2 flex flex-col items-center justify-center">
                    <div className="w-12 h-12 mb-2 text-white">
                      <svg
                        enableBackground="new 0 0 512 512"
                        viewBox="0 0 512 512"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="currentColor"
                      >
                        <g>
                          <path d="m382.961 297.883c32.379-33.724 49.786-78.063 49.015-124.848-1.59-96.529-81.436-174.122-178.064-173.023-96.344 1.121-173.912 79.46-173.912 175.988 0 45.571 17.355 88.794 48.87 121.708 16.343 17.07 27.151 38.962 30.449 65.341-17.058 8.705-20.608 31.524-6.888 44.951-16.965 16.603-6.795 45.654 16.944 47.873 7.924 32.997 37.423 56.127 71.193 56.127h30.863c33.801 0 63.276-23.159 71.194-56.127 23.725-2.218 33.921-31.258 16.944-47.873 13.743-13.45 10.146-36.258-6.887-44.951 3.269-26.133 13.838-48.041 30.279-65.166zm-242.535-11.241c-28.649-29.921-44.426-69.215-44.426-110.642 0-87.204 70.922-158.975 158.098-159.989 87.776-.996 160.434 69.537 161.879 157.288.701 42.536-15.123 82.846-44.558 113.503-18.361 19.124-30.9 44.471-34.481 73.197h-72.938v-88h24c48.523 0 88-39.477 88-88v-24c0-4.418-3.582-8-8-8h-32c-35.455 0-66.076 21.078-80 51.36-13.924-30.281-44.545-51.359-80-51.359h-32c-4.418 0-8 3.582-8 8v24c0 48.523 39.477 88 88 88h24v88h-72.938c-3.631-28.994-16.377-54.288-34.636-73.358zm185.595-83.91c-2.91-3.326-7.966-3.661-11.288-.752l-50.733 44.39v-6.37c0-39.701 32.299-72 72-72h24v16c0 39.701-32.299 72-72 72h-10.709l47.977-41.979c3.325-2.91 3.662-7.964.753-11.289zm-78.021 43.638-50.732-44.391c-3.326-2.911-8.379-2.573-11.289.752s-2.573 8.379.752 11.289l47.977 41.98h-10.708c-39.701 0-72-32.299-72-72v-16h24c39.701 0 72 32.299 72 72zm23.432 249.63h-30.863c-25.125 0-47.143-16.656-54.562-40h139.986c-7.419 23.343-29.436 40-54.561 40zm80.568-68c0 6.617-5.383 12-12 12-9.75 0-161.534 0-168 0-6.617 0-12-5.383-12-12s5.383-12 12-12h168c6.617 0 12 5.383 12 12zm-180-28c-6.617 0-12-5.383-12-12s5.383-12 12-12h168c6.617 0 12 5.383 12 12s-5.383 12-12 12z" />
                          <path d="m56 176c0-4.418-3.582-8-8-8h-40c-4.418 0-8 3.582-8 8s3.582 8 8 8h40c4.418 0 8-3.582 8-8z" />
                          <path d="m71.867 273.071-34.641 20c-3.826 2.209-5.137 7.102-2.928 10.928 2.213 3.832 7.106 5.134 10.928 2.928l34.641-20c3.826-2.209 5.137-7.102 2.928-10.928-2.21-3.826-7.102-5.135-10.928-2.928z" />
                          <path d="m37.226 58.928c37.081 21.408 35.602 21.073 38.634 21.073 8.172 0 11.065-10.855 4.007-14.93l-34.641-20c-3.827-2.209-8.718-.898-10.928 2.928-2.21 3.827-.899 8.72 2.928 10.929z" />
                          <path d="m504 168h-40c-4.418 0-8 3.582-8 8s3.582 8 8 8h40c4.418 0 8-3.582 8-8s-3.582-8-8-8z" />
                          <path d="m474.774 293.071-34.642-20c-3.826-2.21-8.719-.899-10.929 2.928-2.209 3.826-.897 8.719 2.929 10.928l34.642 20c3.809 2.2 8.709.915 10.929-2.928 2.209-3.826.898-8.719-2.929-10.928z" />
                          <path d="m436.141 80.001c3.047 0 1.6.308 38.634-21.073 3.826-2.209 5.138-7.102 2.929-10.928-2.209-3.825-7.101-5.14-10.929-2.928l-34.642 20c-7.071 4.082-4.152 14.929 4.008 14.929z" />
                        </g>
                      </svg>
                    </div>
                    <div className="flex justify-center items-center">Energy</div>
                  </a>
                  <a className="text-center text-white p-2">
                    <div className="h-12 mb-1"></div>
                    <div className="h-14 flex justify-center items-center">Materials</div>
                  </a>
                  <a className="text-center text-white p-2">
                    <div className="h-12 mb-1"></div>
                    <div className="h-14 flex justify-center items-center">Industrials</div>
                  </a>
                  <a className="text-center text-white p-2">
                    <div className="h-12 mb-1"></div>
                    <div className="h-14 flex justify-center items-center">
                      Consumer Discretionary
                    </div>
                  </a>
                  <a className="text-center text-white p-2">
                    <div className="h-12 mb-1"></div>
                    <div className="h-14 flex justify-center items-center">Consumer Staples</div>
                  </a>
                  <a className="text-center text-white p-2 flex flex-col items-center justify-center">
                    <div className="w-12 h-12 mb-2 text-white">
                      <svg
                        viewBox="0 0 420.8 420.8"
                        xmlSpace="preserve"
                        x="0px"
                        y="0px"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="currentColor"
                      >
                        <g>
                          <path
                            d="M413.6,204H378c14.8-33.6,13.2-60.8,7.6-79.2c-9.6-32.8-42-68.4-90-68.4c-12.8,0-25.6,2.4-38.8,7.2
			C234,72,218.8,81.2,212,86c-6.8-4.8-21.6-14-44.8-22.4c-13.2-4.8-26.4-7.2-38.8-7.2c-48,0-80.4,35.6-90,68.4
			c-5.6,19.6-7.6,49.2,11.2,86.4H6.4c-3.6,0-6.4,2.8-6.4,6.4c0,3.6,2.8,6.4,6.4,6.4h50.8c2,3.6,4.4,7.2,7.2,10.8
			c41.6,60,132,125.2,148.4,129.2v0.4c0,0,0.4,0,0.8-0.4c0.4,0,0.8,0,1.2,0v-0.4c14-6.8,100.8-62.8,146.4-129.2c4.4-6,8-12,11.2-18
			h42c3.6,0,6.4-2.8,6.4-6.4C420.8,206.4,417.2,204,413.6,204z M349.6,227.6c-42.4,62-120.4,112-137.2,122.8
			c-17.2-10.8-94.8-61.2-137.6-122.8c-0.8-1.2-1.6-2.4-2.4-3.6h58.8c2.4,0,4.8-1.2,6-3.6l26.8-52.8l42,107.6c0.8,2.4,3.6,4,6,4
			c0,0,0,0,0.4,0c2.8,0,5.2-2,6-4.8l36.8-126l19.6,63.6c0.8,2.4,2.8,4,5.2,4.4c2.4,0.4,4.8-0.8,6.4-2.8l15.6-22.8l13.2,22.4
			c1.2,2,3.2,3.2,5.6,3.2h36C354.4,220.4,352,224,349.6,227.6z M364,204h-39.2l-16.4-28c-1.2-2-3.2-3.2-5.6-3.2
			c-2.4,0-4.4,0.8-5.6,2.8l-13.6,20l-22-71.6c-0.8-2.8-3.6-4.4-6.4-4.8c-2.8,0-5.6,2-6.4,4.8l-37.2,128.4l-40.4-103.2
			c-0.8-2.4-3.2-4-5.6-4c-2.8,0-4.8,1.2-6,3.6l-31.6,62H64.4c-16-29.2-20.4-57.2-13.2-82.4c8.4-28.4,36-58.8,77.6-58.8
			c11.2,0,22.8,2.4,34.4,6.4c29.2,10.8,44.8,23.2,45.2,23.2c2.4,2,5.6,2,8,0c0,0,15.6-12.4,45.2-23.2c11.6-4.4,23.2-6.4,34.4-6.4
			c41.2,0,69.2,30.4,77.6,58.8C380.4,151.6,376.8,177.2,364,204z"
                          />
                        </g>
                      </svg>
                    </div>
                    <div className="flex justify-center items-center">Healthcare</div>
                  </a>
                  <a className="text-center text-white p-2 flex flex-col items-center justify-center">
                    <div className="w-12 h-12 mb-2 text-white">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 512 512"
                        fill="currentColor"
                      >
                        <g>
                          <path d="M184,312V224a8.00008,8.00008,0,0,0-8-8H144a8.00008,8.00008,0,0,0-8,8v88h16V232h16v80Z" />
                          <path d="M312,344V232a8.00008,8.00008,0,0,0-8-8H272a8.00008,8.00008,0,0,0-8,8V344h16V240h16V344Z" />
                          <path d="M248,344V200a8.00008,8.00008,0,0,0-8-8H208a8.00008,8.00008,0,0,0-8,8V328h16V208h16V344Z" />
                          <path d="M376,280V200a8.00008,8.00008,0,0,0-8-8H336a8.00008,8.00008,0,0,0-8,8v88h16V208h16v72Z" />
                          <path d="M440,272V152a8.00008,8.00008,0,0,0-8-8H400a8.00008,8.00008,0,0,0-8,8V272h16V160h16V272Z" />
                          <path d="M138.34277,197.65674a8.00122,8.00122,0,0,0,11.31446,0l66.03711-66.0376,66.35937,73.73242a7.99878,7.99878,0,0,0,5.73633,2.64551c.07031.00195.13965.00293.21.00293a8.00105,8.00105,0,0,0,5.65723-2.34326L400,99.314V120a8.00008,8.00008,0,0,0,8,8h32a8.00008,8.00008,0,0,0,8-8V24a8.00008,8.00008,0,0,0-8-8H344a8.00008,8.00008,0,0,0-8,8V56a8.00008,8.00008,0,0,0,8,8h20.68652l-76.38086,76.38086L221.94629,66.64844a8.00044,8.00044,0,0,0-11.60352-.30518l-96,96a8,8,0,0,0,0,11.31348Zm77.35157-114.0376,66.35937,73.73242a8.00044,8.00044,0,0,0,11.60352.30518l96-96A8.00038,8.00038,0,0,0,384,48H352V32h80v80H416V80a8.0001,8.0001,0,0,0-13.65723-5.65674L288.30566,188.38086l-66.35937-73.73242a7.99878,7.99878,0,0,0-5.73633-2.64551c-.07031-.002-.13965-.00293-.21-.00293a8.00105,8.00105,0,0,0-5.65723,2.34326L144,180.686,131.31348,168Z" />
                          <path d="M88,488V472h24a8.00008,8.00008,0,0,0,8-8V443.04053a201.12746,201.12746,0,0,0,278.22559-5.9502l87.43164-87.4292a30.62834,30.62834,0,0,0-37.41773-47.92041,31.17652,31.17652,0,0,0-51.18677-1.70654l-3.39184,4.55048a34.41184,34.41184,0,0,0-5.54566-3.47138,34.336,34.336,0,0,0-46.668,16.62061l-20.167,44.81555A35.79475,35.79475,0,0,0,308,360H211.31348l-13.65625-13.65674A64.67459,64.67459,0,0,0,120,335.92963V328a8.00008,8.00008,0,0,0-8-8H88v-8a8.00008,8.00008,0,0,0-8-8H16v16H72V480H16v16H80A8.00008,8.00008,0,0,0,88,488ZM429.86719,305.6499a15.13539,15.13539,0,0,1,6.12817,7.04083L372.51953,376.1665a135.33848,135.33848,0,0,1-28.52295,21.8208l65.88428-88.39111A15.13857,15.13857,0,0,1,429.86719,305.6499Zm-73.83008,18.64942a18.33677,18.33677,0,0,1,24.92187-8.87549,18.4104,18.4104,0,0,1,3.13623,1.99438L339.062,377.83545a36.19223,36.19223,0,0,0-4.41089-6.01184ZM186.34277,357.65674l16,16A8.00076,8.00076,0,0,0,208,376H308a20,20,0,0,1,0,40H208v16H308a35.902,35.902,0,0,0,26.35938-11.51617A151.104,151.104,0,0,0,383.834,387.48l69.82227-69.82227a14.62931,14.62931,0,0,1,20.68848,20.68946l-87.4336,87.4292a185.13824,185.13824,0,0,1-261.82324-.00244L120,420.686V355.479A48.62426,48.62426,0,0,1,186.34277,357.65674ZM104,336V456H88V336Z" />
                        </g>
                      </svg>
                    </div>
                    <div className="flex justify-center items-center">Financial</div>
                  </a>
                  <a className="text-center text-white p-2">
                    <div className="h-12 mb-1"></div>
                    <div className="h-14 flex justify-center items-center">
                      Information Technology
                    </div>
                  </a>
                  <a className="text-center text-white p-2">
                    <div className="h-12 mb-1"></div>
                    <div className="h-14 flex justify-center items-center text-xs">
                      Telecommunication Services
                    </div>
                  </a>
                  <Link href="/categories">
                    <a className="text-center text-white p-2">
                      <div className="h-12 mb-1"></div>
                      <div className="h-14 flex justify-center items-center">More</div>
                    </a>
                  </Link>
                </div>
              </div>
            </div>
          </div>
        </div>
        <RecentReviews reviews={recentReviews} />
      </Layout>
    </>
  );
};

export default Home;
